{"ast":null,"code":"import _ElementUI2 from \"element-ui/lib/theme-chalk/index.css\";\nimport _ElementUI from \"element-ui/lib\";\nimport axios from \"axios\";\nimport router from \"./router\";\naxios.defaults.baseURL = 'http://localhost:8081';\nconst request = axios.create({\n  timeout: 5000,\n  headers: {\n    headers: {\n      'Content-Type': \"application/json; charset=utf-8\"\n    }\n  }\n});\nrequest.interceptors.request.use(config => {\n  config.headers['Authorization'] = localStorage.getItem(\"token\");\n  return config;\n});\nrequest.interceptors.response.use(response => {\n  console.log(\"response ->\" + response);\n  let res = response.data;\n\n  if (res.code === 200) {\n    return response;\n  } else {\n    _ElementUI.Message.error(!res.msg ? '系统异常' : res.msg);\n\n    return Promise.reject(response.data.msg);\n  }\n}, error => {\n  console.log(error);\n\n  if (error.response.data) {\n    error.massage = error.response.data.msg;\n  }\n\n  if (error.response.status === 401) {\n    router.push(\"/login\");\n  }\n\n  _ElementUI.Message.error(error.massage, {\n    duration: 3000\n  });\n\n  return Promise.reject(error);\n});\nexport default request;","map":{"version":3,"names":["axios","router","defaults","baseURL","request","create","timeout","headers","interceptors","use","config","localStorage","getItem","response","console","log","res","data","code","Message","error","msg","Promise","reject","massage","status","push","duration"],"sources":["/Users/yihuaiqi/Desktop/vue_web/vueadmin/src/axios.js"],"sourcesContent":["import axios from \"axios\";\nimport router from \"./router\";\nimport ElementUI from \"element-ui\";\n\naxios.defaults.baseURL = 'http://localhost:8081'\n\nconst request = axios.create({\n    timeout:5000,\n    headers:{\n        headers: {\n            'Content-Type': \"application/json; charset=utf-8\"\n        }\n    }\n})\n\nrequest.interceptors.request.use(config=>{\n    config.headers['Authorization'] = localStorage.getItem(\"token\")\n\treturn config\n})\n\nrequest.interceptors.response.use(\n\tresponse => {\n\n\t\tconsole.log(\"response ->\" + response)\n\n\t\tlet res = response.data\n\n\t\tif (res.code === 200) {\n\t\t\treturn response\n\t\t} else {\n\t\t\tElementUI.Message.error(!res.msg ? '系统异常' : res.msg)\n\t\t\treturn Promise.reject(response.data.msg)\n\t\t}\n\t},\n\terror => {\n\n\t\tconsole.log(error)\n\n\t\tif (error.response.data) {\n\t\t\terror.massage = error.response.data.msg\n\t\t}\n\n\t\tif (error.response.status === 401) {\n\t\t\trouter.push(\"/login\")\n\t\t}\n\n\t\tElementUI.Message.error(error.massage, {duration: 3000})\n\t\treturn Promise.reject(error)\n\t}\n)\n\nexport default request"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AAGAD,KAAK,CAACE,QAAN,CAAeC,OAAf,GAAyB,uBAAzB;AAEA,MAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAN,CAAa;EACzBC,OAAO,EAAC,IADiB;EAEzBC,OAAO,EAAC;IACJA,OAAO,EAAE;MACL,gBAAgB;IADX;EADL;AAFiB,CAAb,CAAhB;AASAH,OAAO,CAACI,YAAR,CAAqBJ,OAArB,CAA6BK,GAA7B,CAAiCC,MAAM,IAAE;EACrCA,MAAM,CAACH,OAAP,CAAe,eAAf,IAAkCI,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAlC;EACH,OAAOF,MAAP;AACA,CAHD;AAKAN,OAAO,CAACI,YAAR,CAAqBK,QAArB,CAA8BJ,GAA9B,CACCI,QAAQ,IAAI;EAEXC,OAAO,CAACC,GAAR,CAAY,gBAAgBF,QAA5B;EAEA,IAAIG,GAAG,GAAGH,QAAQ,CAACI,IAAnB;;EAEA,IAAID,GAAG,CAACE,IAAJ,KAAa,GAAjB,EAAsB;IACrB,OAAOL,QAAP;EACA,CAFD,MAEO;IACN,WAAUM,OAAV,CAAkBC,KAAlB,CAAwB,CAACJ,GAAG,CAACK,GAAL,GAAW,MAAX,GAAoBL,GAAG,CAACK,GAAhD;;IACA,OAAOC,OAAO,CAACC,MAAR,CAAeV,QAAQ,CAACI,IAAT,CAAcI,GAA7B,CAAP;EACA;AACD,CAbF,EAcCD,KAAK,IAAI;EAERN,OAAO,CAACC,GAAR,CAAYK,KAAZ;;EAEA,IAAIA,KAAK,CAACP,QAAN,CAAeI,IAAnB,EAAyB;IACxBG,KAAK,CAACI,OAAN,GAAgBJ,KAAK,CAACP,QAAN,CAAeI,IAAf,CAAoBI,GAApC;EACA;;EAED,IAAID,KAAK,CAACP,QAAN,CAAeY,MAAf,KAA0B,GAA9B,EAAmC;IAClCxB,MAAM,CAACyB,IAAP,CAAY,QAAZ;EACA;;EAED,WAAUP,OAAV,CAAkBC,KAAlB,CAAwBA,KAAK,CAACI,OAA9B,EAAuC;IAACG,QAAQ,EAAE;EAAX,CAAvC;;EACA,OAAOL,OAAO,CAACC,MAAR,CAAeH,KAAf,CAAP;AACA,CA5BF;AA+BA,eAAehB,OAAf"},"metadata":{},"sourceType":"module"}