{"ast":null,"code":"import axios from \"axios\";\nimport router from \"./router\";\nimport { ElMessage } from 'element-plus'; //vue3.0需要使用element-plus\n// axios.defaults.baseURL = 'http://localhost:8081'\n\nconst request = axios.create({\n  timeout: 5000,\n  headers: {\n    headers: {\n      'Content-Type': \"application/json; charset=utf-8\"\n    }\n  }\n});\nrequest.interceptors.request.use(config => {\n  config.headers['Authorization'] = localStorage.getItem(\"token\");\n  return config;\n});\nrequest.interceptors.response.use(response => {\n  console.log(\"response ->\" + response);\n  let res = response.data;\n\n  if (res.code === 200) {\n    return response;\n  } else {\n    // ElementUI.Message.error(!res.msg ? '系统异常' : res.msg)\n    ElMessage(!res.msg ? '系统异常' : res.msg);\n    return Promise.reject(response.data.msg);\n  }\n}, error => {\n  console.log(error);\n\n  if (error.response.data) {\n    error.massage = error.response.data.msg;\n  }\n\n  if (error.response.status === 401) {\n    router.push(\"/login\");\n  } // ElementUI.Message.error(error.massage, {duration: 3000})\n\n\n  ElMessage(error.massage, {\n    duration: 3000\n  });\n  return Promise.reject(error);\n});\nexport default request;","map":{"version":3,"names":["axios","router","ElMessage","request","create","timeout","headers","interceptors","use","config","localStorage","getItem","response","console","log","res","data","code","msg","Promise","reject","error","massage","status","push","duration"],"sources":["/Users/yihuaiqi/Desktop/vue_web/vueadmin/src/axios.js"],"sourcesContent":["import axios from \"axios\";\nimport router from \"./router\";\nimport { ElMessage } from 'element-plus'; //vue3.0需要使用element-plus\n\n// axios.defaults.baseURL = 'http://localhost:8081'\n\nconst request = axios.create({\n    timeout:5000,\n    headers:{\n        headers: {\n            'Content-Type': \"application/json; charset=utf-8\"\n        }\n    }\n})\n\nrequest.interceptors.request.use(config=>{\n    config.headers['Authorization'] = localStorage.getItem(\"token\")\n\treturn config\n})\n\nrequest.interceptors.response.use(\n\tresponse => {\n\n\t\tconsole.log(\"response ->\" + response)\n\n\t\tlet res = response.data\n\n\t\tif (res.code === 200) {\n\t\t\treturn response\n\t\t} else {\n\t\t\t// ElementUI.Message.error(!res.msg ? '系统异常' : res.msg)\n            ElMessage(!res.msg ? '系统异常' : res.msg)\n\t\t\treturn Promise.reject(response.data.msg)\n\t\t}\n\t},\n\terror => {\n\n\t\tconsole.log(error)\n\n\t\tif (error.response.data) {\n\t\t\terror.massage = error.response.data.msg\n\t\t}\n\n\t\tif (error.response.status === 401) {\n\t\t\trouter.push(\"/login\")\n\t\t}\n\n\t\t// ElementUI.Message.error(error.massage, {duration: 3000})\n        ElMessage(error.massage, {duration: 3000})\n\t\treturn Promise.reject(error)\n\t}\n)\n\nexport default request"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAASC,SAAT,QAA0B,cAA1B,C,CAA0C;AAE1C;;AAEA,MAAMC,OAAO,GAAGH,KAAK,CAACI,MAAN,CAAa;EACzBC,OAAO,EAAC,IADiB;EAEzBC,OAAO,EAAC;IACJA,OAAO,EAAE;MACL,gBAAgB;IADX;EADL;AAFiB,CAAb,CAAhB;AASAH,OAAO,CAACI,YAAR,CAAqBJ,OAArB,CAA6BK,GAA7B,CAAiCC,MAAM,IAAE;EACrCA,MAAM,CAACH,OAAP,CAAe,eAAf,IAAkCI,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAlC;EACH,OAAOF,MAAP;AACA,CAHD;AAKAN,OAAO,CAACI,YAAR,CAAqBK,QAArB,CAA8BJ,GAA9B,CACCI,QAAQ,IAAI;EAEXC,OAAO,CAACC,GAAR,CAAY,gBAAgBF,QAA5B;EAEA,IAAIG,GAAG,GAAGH,QAAQ,CAACI,IAAnB;;EAEA,IAAID,GAAG,CAACE,IAAJ,KAAa,GAAjB,EAAsB;IACrB,OAAOL,QAAP;EACA,CAFD,MAEO;IACN;IACSV,SAAS,CAAC,CAACa,GAAG,CAACG,GAAL,GAAW,MAAX,GAAoBH,GAAG,CAACG,GAAzB,CAAT;IACT,OAAOC,OAAO,CAACC,MAAR,CAAeR,QAAQ,CAACI,IAAT,CAAcE,GAA7B,CAAP;EACA;AACD,CAdF,EAeCG,KAAK,IAAI;EAERR,OAAO,CAACC,GAAR,CAAYO,KAAZ;;EAEA,IAAIA,KAAK,CAACT,QAAN,CAAeI,IAAnB,EAAyB;IACxBK,KAAK,CAACC,OAAN,GAAgBD,KAAK,CAACT,QAAN,CAAeI,IAAf,CAAoBE,GAApC;EACA;;EAED,IAAIG,KAAK,CAACT,QAAN,CAAeW,MAAf,KAA0B,GAA9B,EAAmC;IAClCtB,MAAM,CAACuB,IAAP,CAAY,QAAZ;EACA,CAVO,CAYR;;;EACMtB,SAAS,CAACmB,KAAK,CAACC,OAAP,EAAgB;IAACG,QAAQ,EAAE;EAAX,CAAhB,CAAT;EACN,OAAON,OAAO,CAACC,MAAR,CAAeC,KAAf,CAAP;AACA,CA9BF;AAiCA,eAAelB,OAAf"},"metadata":{},"sourceType":"module"}